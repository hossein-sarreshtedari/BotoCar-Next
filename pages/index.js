import { useEffect, useState } from "react";

//styles
import styles from "../styles/Home.module.scss";

//dependencys
import Link from "next/link";
import { useRouter } from "next/router";

//shared
import ShowCars from "@/components/templates/ShowCars";

const Home = ({ carsData }) => {

  const router = useRouter();

  const [threeCars, setThreeCars] = useState([]);
  const [filters, setFilters] = useState({

    minPrice: "",
    maxPrice: "",

  })


  //for random three cars
  useEffect(() => {

    let randomNumber = [];

    for (let i = 0; i < 3; i++) {

      let random = Math.floor(Math.random() * carsData.length);

      while (randomNumber.includes(random)) {

        random = Math.floor(Math.random() * carsData.length);
      }

      randomNumber.push(random)



    }

    setThreeCars([carsData[randomNumber[0]], carsData[randomNumber[1]], carsData[randomNumber[2]]])




  }, [])



  //for handle filter inputs
  const filterHandler = (e) => {

    setFilters({ ...filters, [e.target.name]: e.target.value })
  }

  

  //for search handler
  const searcHandler = (e) => {

    e.preventDefault();

    if(filters.minPrice === "" && filters.maxPrice === ""){

      window.alert("بازه قیمتی وارد نکردید");
      return ;
    }

    if(filters.minPrice === "" && filters.maxPrice !== ""){

      window.alert("باید کمترین قیمت را هم وارد کنید");
      return ;
    }

    if(filters.minPrice !== "" && filters.maxPrice === "") router.push(`/filters/${filters.minPrice}`);
    else router.push(`/filters/${filters.minPrice}/${filters.maxPrice}`);    

    
  }


  //for handle select a Category
  const gotoCategory= (url) =>{

      router.push(`/categorys/${url}`)
  }


  return (
    <>

      <div className={styles.topHome}>

        <div className={styles.searchDiv} >

          <form onSubmit={searcHandler} className={styles.FilterDiv}>

            <div className={styles.inputs}>

              <input type="text" placeholder="inter min-price" value={filters.minPrice} name="minPrice" onChange={filterHandler} />
              <input type="text" placeholder="inter max-price" value={filters.maxPrice} name="maxPrice" onChange={filterHandler} />

            </div>

            <button type="submit" onClick={searcHandler}>Search</button>

          </form>


        </div>


        <div className={styles.carsCategory}>

          <div className={styles.cart} onClick={() => gotoCategory("sedan")}>

            <svg
              id={styles.svgCart}
              xmlns="http://www.w3.org/2000/svg"
              fill="#000"
              version="1.1"
              viewBox="0 0 1000 1000"
              xmlSpace="preserve"
            >
              <g fill="#231F20">
                <path d="M284.353 608.065c7.629 0 13.858-5.995 14.228-13.532.013-.236.019-.474.019-.712 0-7.867-6.379-14.246-14.246-14.246-7.867 0-14.246 6.379-14.246 14.246 0 .238.007.476.019.712.369 7.537 6.598 13.532 14.226 13.532zM729.354 579.575c-7.867 0-14.246 6.379-14.246 14.246 0 .238.007.476.019.712.37 7.537 6.599 13.532 14.228 13.532s13.858-5.995 14.228-13.532c.013-.236.018-.474.018-.712-.001-7.867-6.38-14.246-14.247-14.246z"></path>
                <path d="M172.624 597.235h43.569c1.77 36.11 31.61 64.83 68.16 64.83s66.391-28.72 68.16-64.83h308.68c1.771 36.11 31.61 64.83 68.16 64.83s66.391-28.72 68.16-64.83h35.71c4.01 0 7.65-1.8 10.28-4.7 2.63-2.9 4.26-6.9 4.26-11.33 0-3.81-1.229-7.5-3.479-10.4l-7.41-9.57c16.55-37.48 10.75-91.19 5.229-122.11-3.17-17.81-12.899-33.38-26.93-42.87-16.811-11.38-45.44-26.93-92.63-43.51-93.92-32.99-259.95-4.32-292.641 22.5-26.05 21.36-77.59 72-142.92 79.5-33.949 3.89-63.02 13.82-83.12 22.47-17.89 7.69-29.859 26.44-30.51 47.59l-.71 22.93-11.33 8.33c-2.84 2.09-5.109 4.88-6.67 8.1-1.56 3.21-2.41 6.85-2.41 10.6.001 12.41 9.131 22.47 20.392 22.47zm599.84 0c-1.74 22.25-20.41 39.83-43.11 39.83s-41.37-17.58-43.109-39.83a42.145 42.145 0 01-.141-3.41c0-23.85 19.4-43.25 43.25-43.25 23.851 0 43.25 19.4 43.25 43.25 0 1.15-.05 2.29-.14 3.41zm55.247-109.46c3.336.69 5.771 3.549 5.956 6.95.821 15.131-1.424 30.716-2.923 39.046a7.463 7.463 0 01-7.353 6.137h-4.998c-4.402 0-7.851-3.787-7.439-8.17l3.002-32.026a7.466 7.466 0 011.895-4.311l4.802-5.316a7.469 7.469 0 017.058-2.31zM681.14 418.279l5.027-23.402a24.21 24.21 0 0121.145-18.993l4.264-.448c.896.297 1.808.588 2.683.895 46.205 16.234 72.761 31.053 86.901 40.625 8.388 5.674 14.338 15.349 16.331 26.549.243 1.362.478 2.718.703 4.069H704.81a24.21 24.21 0 01-23.67-29.295zm-103.452 83.629h-25a8.5 8.5 0 110-17h25a8.5 8.5 0 010 17zm-142.012-98.819c3.835-3.277 7.146-6.108 10.079-8.512 4.355-3.573 22.641-12.418 60.703-20.347 31.671-6.597 66.803-10.498 100.046-11.177l-11.623 66.681c-2.934 16.83-17.209 29.335-34.278 30.028l-173.586 7.045a36.285 36.285 0 01-26.45-9.948c31.52-16.536 56.982-38.28 75.109-53.77zM284.353 550.575c23.851 0 43.25 19.4 43.25 43.25 0 1.15-.05 2.29-.14 3.41-1.74 22.25-20.41 39.83-43.11 39.83s-41.37-17.58-43.109-39.83a42.145 42.145 0 01-.141-3.41c.001-23.85 19.401-43.25 43.25-43.25zm-84.833-48c6.812 0 12.333 8.357 12.333 18.667 0 10.309-5.521 18.667-12.333 18.667-6.811 0-12.333-8.357-12.333-18.667.001-10.31 5.522-18.667 12.333-18.667z"></path>
              </g>
            </svg>
            <span>Sedan</span>

          </div>

          <div className={styles.cart} onClick={() => gotoCategory("suv")}>

            <svg
              id={styles.svgCart}
              xmlns="http://www.w3.org/2000/svg"
              fill="#000"
              version="1.1"
              viewBox="0 0 1000 1000"
              xmlSpace="preserve"
            >
              <g fill="#231F20">
                <path d="M789.373 376.216c-7.82-7.56-17.27-12.5-27.33-14.36l-1.136-.21a9.257 9.257 0 01-7.594-9.103 7.438 7.438 0 00-7.438-7.438 69.46 69.46 0 00-16.868 2.08l-23.279 5.828c-144.527-18.666-240.265.539-271.215 8.443-6.39 1.63-12.64 3.88-18.71 6.71l-110.95 51.74c-6.83 3.18-13.89 5.62-21.11 7.3l-49.27 11.41c-36.59 8.47-66.88 38.14-80.27 78.61l-2.42 39.41c-1.57 25.72 15.95 47.59 38.14 47.59h22.23c8.97 29.34 36.26 50.67 68.54 50.67 32.27 0 59.56-21.33 68.53-50.67h311.76c8.97 29.34 36.26 50.67 68.53 50.67s59.56-21.33 68.54-50.67h10.19c19.55 0 35.96-17.141 38.02-39.74 2.98-32.78 4.22-79.06-7.1-111.82-12.509-36.2-35.259-62.431-49.79-76.45zm-603.39 177.09c-4.97 0-9-6.561-9-14.66 0-8.101 4.03-14.67 9-14.67s9 6.569 9 14.67c0 8.099-4.029 14.66-9 14.66zm11.26-45.241c-5.67 1.56-10.5-4.271-7.97-9.58 4.68-9.82 13.02-22.54 26.37-28.26 16.39-7.02 29.83-4.181 36.37-1.87 2.83 1.01 4.69 3.76 4.51 6.76-.33 5.65-2.76 14.71-14.21 19.11-11.06 4.26-31.64 10.14-45.07 13.84zm125.11 96.161c-7.7 15.22-23.48 25.67-41.66 25.67-18.19 0-33.97-10.45-41.67-25.67-3.2-6.311-5-13.45-5-21 0-25.73 20.93-46.67 46.67-46.67 25.73 0 46.66 20.939 46.66 46.67 0 7.549-1.8 14.689-5 21zm71.241-166.271a7.675 7.675 0 01-7.13 4.77h-71.41c.12-.061.24-.11.36-.16l94.47-44.05-16.29 39.44zm132.219 45.441h-27.67c-4.69 0-8.5-3.811-8.5-8.5 0-2.351.95-4.47 2.49-6.01a8.464 8.464 0 016.01-2.49h27.67a8.5 8.5 0 110 17zm15.051-43.031l-82.62 1.83c-2.61.08-4.97-1.14-6.48-3.27-1.5-2.141-1.83-4.761-.9-7.2l20.02-52.38c20.06-3.48 47.74-7.051 82.17-8.53l-12.19 69.55zm89-1.96l-71.67 1.58 12.21-69.71c5.25-.11 10.61-.17 16.12-.17 17.28 0 34.84.55 52.62 1.64-3.261 24.78-6.85 50.71-9.28 66.66zm26.269-65.45a958.87 958.87 0 0144.95 4.681l31.28 34.25a7.648 7.648 0 011.88 6.67 7.68 7.68 0 01-4.22 5.489l-24.83 11.99a7.5 7.5 0 01-3.18.771l-54.9 1.21c2.63-17.29 6.02-42.261 9.02-65.061zm5.35 110.441a8.5 8.5 0 01-8.5-8.5c0-2.351.95-4.47 2.49-6.01a8.464 8.464 0 016.01-2.49h27.66c4.7 0 8.5 3.8 8.5 8.5a8.5 8.5 0 01-8.5 8.5h-27.66zm109.701 120.83c-7.7 15.22-23.48 25.67-41.67 25.67-18.18 0-33.96-10.45-41.66-25.67-3.2-6.311-5-13.45-5-21 0-25.73 20.93-46.67 46.66-46.67 25.74 0 46.67 20.939 46.67 46.67a46.329 46.329 0 01-5 21zm51.72-78.541c-2.45 1.74-5.77 1.62-8.12-.25-5.43-4.33-14.96-14.21-17.68-31.83-2.22-14.37 4.15-28.17 10.01-37.34 3.16-4.96 10.66-3.96 12.34 1.68 3.98 13.36 9.88 33.92 12.13 45.56 2.33 12.051-4.071 18.91-8.68 22.18z"></path>
                <path d="M280.693 556.226c-14.92 0-27.01 12.09-27.01 27 0 8.479 3.91 16.05 10.04 21 4.63 3.76 10.54 6 16.97 6s12.33-2.24 16.96-6c6.13-4.95 10.04-12.521 10.04-21 0-14.911-12.09-27-27-27zM729.513 556.226c-14.91 0-27 12.09-27 27 0 8.479 3.91 16.05 10.04 21 4.63 3.76 10.53 6 16.96 6 6.43 0 12.34-2.24 16.97-6 6.12-4.95 10.03-12.521 10.03-21 0-14.911-12.079-27-27-27z"></path>
              </g>
            </svg>
            <span>SUV</span>

          </div>

          <div className={styles.cart} onClick={() => gotoCategory("hatchback")}>

            <svg
              id={styles.svgCart}
              xmlns="http://www.w3.org/2000/svg"
              fill="#000"
              version="1.1"
              viewBox="0 0 1000 1000"
              xmlSpace="preserve"
            >
              <g fill="#231F20">
                <path d="M839.499 456.817c-1.274-9.89-10.321-16.868-20.211-15.594l-12.526 1.617c-.422.059-.833.128-1.245.206a93.76 93.76 0 00-6.361-14.32l-32.188-58.711a7.09 7.09 0 01-.441-5.86l2.725-7.43c1.754-4.754-1.901-9.763-6.89-9.438l-307.431 19.76c-20.975 1.343-40.627 10.879-54.839 26.61l-50.84 56.27c-7.263 8.037-16.741 13.653-27.189 16.124l-108.815 25.698c-15.281 3.617-27.728 14.841-33.051 29.836l-9.439 26.571a21.964 21.964 0 01-5.989 8.959l-5.803 5.214a14.902 14.902 0 00-4.861 9.567l-2.019 19.151c-.941 8.841 5.91 16.534 14.663 16.475l38.892-.244c7.057 26.188 30.972 45.449 59.387 45.449 28.679 0 52.781-19.633 59.583-46.204l342.295-2.177c.206.991.441 1.961.706 2.932 7.057 26.188 30.973 45.449 59.387 45.449 28.679 0 52.781-19.633 59.583-46.204.245-.971.471-1.95.666-2.94l29.218-.186h5.665c5.077 0 9.184-4.116 9.184-9.193v-27.68c0-5.077-4.107-9.193-9.184-9.193h-1.529a94.377 94.377 0 00-.637-13.909l12.291-1.587c9.89-1.275 16.868-10.321 15.594-20.21l-8.351-64.808zm-615.362 74.952a30.024 30.024 0 01-8.939 11.635l-1.676 1.322a30.001 30.001 0 01-14.565 6.195l-3.489.481c-4.411.597-7.812-3.814-6.106-7.92l8.939-21.622a5.762 5.762 0 014.577-3.519l18.613-2.47c4.44-.589 7.831 3.891 6.057 8.008l-3.411 7.89zm74.5 74.922c-5.861 12.702-18.73 21.533-33.609 21.533-14.722 0-27.454-8.636-33.413-21.112a36.714 36.714 0 01-3.588-15.888c0-20.398 16.594-37.001 37-37.001 20.397 0 37 16.604 37 37.001a36.738 36.738 0 01-3.39 15.467zm198.42-88.918l-25.886 2.126c-4.587.374-8.606-3.038-8.988-7.624a8.342 8.342 0 017.626-8.989l25.885-2.127a8.34 8.34 0 019.018 8.311 8.342 8.342 0 01-7.655 8.303zm11.184-37.216l-128.252 6.047a10.141 10.141 0 01-6.077-1.676l-4.626-3.059c-5.234-3.459-6.146-10.771-1.941-15.417l.078-.099 50.85-56.269c9.978-11.046 23.563-17.643 38.235-18.594l60.328-3.874-8.595 92.941zm28.937-94.247l76.663-4.924a16.894 16.894 0 0116.564 10.075l15.506 35.374a34.84 34.84 0 011.343 24.298c-4.352 13.938-16.947 23.67-31.531 24.356l-87.53 4.127 8.985-93.306zm104.705 127.924l-25.885 2.127a8.327 8.327 0 01-9.007-8.331c0-4.284 3.293-7.92 7.645-8.282l25.885-2.127c4.587-.373 8.615 3.038 8.988 7.625a8.34 8.34 0 01-7.626 8.988zm119.93 89.506a33.585 33.585 0 01-1.206 2.951c-5.861 12.702-18.73 21.533-33.609 21.533-14.722 0-27.454-8.636-33.413-21.112a36.755 36.755 0 01-3.588-15.888c0-20.398 16.594-37.001 37-37.001 20.397 0 37 16.604 37 37.001a36.758 36.758 0 01-2.184 12.516zm-53.702-130.133a6.72 6.72 0 01-6.371-3.999l-34.285-77.147a6.728 6.728 0 015.94-9.467l66.973-2.166a6.747 6.747 0 016.047 3.361c24.435 42.009 33.266 66.993 36.422 78.745 1.127 4.185-1.96 8.321-6.292 8.469l-68.434 2.204zm91.986 77.108h-14.702a4.73 4.73 0 01-4.734-4.734v-15.77a4.73 4.73 0 014.734-4.734h11.487c.872 0 1.705.235 2.411.666a4.688 4.688 0 012.235 3.127l1.451 7.097 1.764 8.664a4.737 4.737 0 01-4.646 5.684z"></path>
                <path d="M265.028 569.749c-11.869 0-21.485 9.616-21.485 21.476 0 6.233 2.646 11.84 6.89 15.769a21.366 21.366 0 0014.594 5.715 21.374 21.374 0 0014.781-5.9c4.126-3.92 6.694-9.449 6.694-15.584.001-11.86-9.614-21.476-21.474-21.476zM726.998 569.749c-11.87 0-21.485 9.616-21.485 21.476 0 4.822 1.588 9.271 4.273 12.85a21.104 21.104 0 002.617 2.92 21.367 21.367 0 0014.594 5.715 21.376 21.376 0 0017.359-8.851 21.29 21.29 0 004.116-12.633c.001-11.861-9.614-21.477-21.474-21.477z"></path>
              </g>
            </svg>
            <span>Hatchback</span>

          </div>

          <div className={styles.cart} onClick={() => gotoCategory("sport")}>

            <svg
              id={styles.svgCart}
              xmlns="http://www.w3.org/2000/svg"
              fill="#000"
              version="1.1"
              viewBox="0 0 1000 1000"
              xmlSpace="preserve"
            >
              <g fill="#231F20">
                <path d="M164.651 575.269c.07.03.139.05.209.05h37.181c7.26 24.678 30.071 42.683 57.092 42.683 27.022 0 49.833-18.004 57.082-42.683h349.077c7.25 24.678 30.061 42.683 57.082 42.683 27.022 0 49.833-18.004 57.092-42.683h39.564c10.139 0 18.541-7.875 19.206-18.005l2.433-37.211a19.405 19.405 0 00-.923-7.269l-9.613-29.227 4.995-27.201c1.092-5.948-2.582-11.728-8.421-13.277l-14.141-3.745-.005-.001 6.573-24.493 5.506-.755c14.735-2.022 25.042-15.605 23.021-30.341a2.079 2.079 0 00-2.342-1.777l-36.194 4.966c-14.735 2.022-25.042 15.605-23.021 30.341a2.078 2.078 0 002.342 1.777l14.32-1.964-4.937 18.396a1124.137 1124.137 0 00-349.523-32.652 100.005 100.005 0 00-19.633 3.247 98.697 98.697 0 00-18.591 7.121l-90.191 45.364a99.538 99.538 0 01-25.562 8.739l-83.101 16.197a53.043 53.043 0 00-32.742 20.875l-13.734 18.908a19.955 19.955 0 00-12.662 18.571v14.479a20.477 20.477 0 0012.561 18.887zm624.507-72.434l3.843-9.901a4.355 4.355 0 012.642-2.533l16.783-5.76a4.347 4.347 0 015.621 3.039l3.814 14.996c.685 2.701-1.311 5.332-4.092 5.412l-24.45.665c-3.099.09-5.293-3.019-4.161-5.918zm-32.106 55.671a34.4 34.4 0 01-4.37 16.813c-5.919 10.646-17.279 17.856-30.308 17.856-13.019 0-24.38-7.21-30.309-17.856a34.392 34.392 0 01-4.36-16.813c0-19.126 15.552-34.678 34.668-34.678 19.127 0 34.679 15.552 34.679 34.678zM644.158 425.742l37.449 5.343a36.452 36.452 0 0123.407 13.397c1.669 2.095.069 5.174-2.602 4.995l-32.613-2.065a36.495 36.495 0 01-27.131-14.846l-1.43-1.946c-1.618-2.207.219-5.266 2.92-4.878zm-17.616 73.636l-11.51 30.577a36.5 36.5 0 01-22.126 21.62l-2.284.794c-2.582.904-4.965-1.748-3.813-4.22l16.058-34.261a36.493 36.493 0 0119.653-18.462c2.492-.983 4.965 1.45 4.022 3.952zm-295.61-18.53l.109-.06 90.191-45.364a73.775 73.775 0 0128.65-7.766 1100.708 1100.708 0 0169.883-2.225c18.719 0 37.419.487 56.099 1.44a32.854 32.854 0 0119.782 7.935c15.551 13.446 31.302 29.614 29.762 38.869-2.88 17.25-266.622 19.703-285.003 19.852a5.058 5.058 0 01-1.946-.367l-7.11-2.831c-4.181-1.658-4.429-7.467-.417-9.483zm-71.8 42.98c19.117 0 34.669 15.552 34.669 34.678a34.4 34.4 0 01-4.37 16.813c-5.919 10.646-17.28 17.856-30.299 17.856-13.029 0-24.39-7.21-30.318-17.856a34.392 34.392 0 01-4.36-16.813c0-19.126 15.551-34.678 34.678-34.678zm-74.173-2.403l14.271-17.796a1.67 1.67 0 011.022-.596l31.501-5.373c1.718-.297 2.671 1.907 1.291 2.959l-22.642 17.21a1.55 1.55 0 01-.586.288l-23.149 5.958c-1.539.399-2.711-1.408-1.708-2.65z"></path>
                <path d="M259.132 571.575c7.22 0 13.069-5.849 13.069-13.069 0-7.22-5.849-13.079-13.069-13.079-7.22 0-13.079 5.859-13.079 13.079 0 7.22 5.859 13.069 13.079 13.069zM722.373 571.575c7.229 0 13.079-5.849 13.079-13.069 0-7.22-5.849-13.079-13.079-13.079-7.22 0-13.069 5.859-13.069 13.079 0 7.22 5.85 13.069 13.069 13.069z"></path>
              </g>
            </svg>
            <span>Sport Cars</span>

          </div>



        </div>


        <Link href={"/cars"} className={styles.parentSeeAll}><button className={styles.seeAll}>See All Cars</button></Link>


        <ShowCars array={threeCars} />


      </div>

    </>
  );
};

export default Home;